{%- for item in string %}
    {% if 'custom' in item.features %}
    {
      "linkedItems": [
        "{{thingid}}_{{item.name}}_{{item.label}}"          {# must match "linkedItems" definition from item #}
      ],
      "uid": "mqtt:topic:{{mqttUID}}:{{thingid}}:{{item.name}}",
      "id": "{{item.label|replace(" ", "_")}}_{{item.name}}",
      "channelTypeUID": "mqtt:string",
      "itemType": "string",
      "kind": "STATE",
      "label": "{{item.label}}",
      "description": "{{item.label}}",
      "defaultTags": [
        "{{item.tags}}"
      ],
      "properties": {
      },
      "configuration": {
        "retained": false,
        "postCommand": false,
        "formatBeforePublish": "%s",
        "commandTopic": "cmnd/{{topic}}/{{item.name}}",
        "step": 1,
        "stateTopic": "tele/{{topic}}/RESULT",
        "transformationPattern": "JSONPATH:$.{{item.name}}"
      }
    },
    {% else %}
    {
      "linkedItems": [
        "{{thingid}}_{{item.name}}_{{item.label}}"          {# must match "linkedItems" definition from item #}
      ],
      "uid": "mqtt:topic:{{mqttUID}}:{{thingid}}:{{item.name}}_{{loop.index}}",
      "id": "{{item.label|replace(" ", "_")}}_{{item.name}}_{{loop.index}}",
      "channelTypeUID": "mqtt:string",
      "itemType": "string",
      "kind": "STATE",
      "label": "{{item.label}}",
      "description": "{{item.label}}",
      "defaultTags": [
        "{{item.tags}}"
      ],
      "properties": {
      },
      "configuration": {
        "retained": false,
        "postCommand": false,
        "formatBeforePublish": "%s",
        "step": 1,
        "stateTopic": "tele/{{topic}}/SENSOR",
        "transformationPattern": "JSONPATH:$.{{item.key}}"
      }
    },
    {% endif %}
{%- endfor %}